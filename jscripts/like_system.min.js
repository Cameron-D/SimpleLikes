!function(a,b,c){this.MybbStuff=this.MybbStuff||{},this.MybbStuff.LikeSystem=function(a){var b,c=function(a,c){this.selector=a,this.postKey=c,this.VERSION="1.3.1",b=this};return c.prototype={constructor:c,init:function(){return a("body").on("click",this.selector,this.togglePostLike),this},togglePostLike:function(c){c.preventDefault();var d=a(this),e=d.attr("id").substr(16);return a.post("xmlhttp.php?action=like_post",{my_post_key:b.postKey,post_id:e},this.togglePostLikeSuccess,"json"),!1},togglePostLikeSuccess:function(b){if(b.errors)a.each(b.errors,function(a,b){b&&(console.log(b),alert(b))}),alert(b.error);else{var c=a("#post_likes_"+b.postId),d=a("#likeButton_post_"+b.postId);0!==c.length&&0!==b.likeString.length?c.html(b.likeString):0!==c.length?c.fadeOut("slow",function(){a(this).remove()}):a("#pid_"+b.postId).after(b.templateString),0!==d.length&&d.text(b.buttonString)}}},c}(a,window),a(b).ready(function(){var a=new MybbStuff.LikeSystem("a[id^='likeButton_post_']",c);a.init()})}(jQuery,document,my_post_key);
